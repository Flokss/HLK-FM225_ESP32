# Face Recognition Access System with HLK-FM225 and ESP32

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º –ª–∏—Ü –Ω–∞ –±–∞–∑–µ –º–æ–¥—É–ª—è Hi-Link HLK-FM225 –∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ ESP32. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∂—É—Ä–Ω–∞–ª–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **ESP32** ‚Äî –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Wi‚ÄëFi
- **HLK-FM225** ‚Äî –º–æ–¥—É–ª—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** ‚Äî –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∂—É—Ä–Ω–∞–ª–æ–º —Å–æ–±—ã—Ç–∏–π
- **SPIFFS** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞ —Å–æ–±—ã—Ç–∏–π –≤–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
- **–ö–Ω–æ–ø–∫–∞ –∏ —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã** ‚Äî –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üß† –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üö™ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü–∞ (—Ä—É—á–Ω–∞—è –∏–ª–∏ —Å –∫–Ω–æ–ø–∫–∏)
- üë§ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ UID
- üìú –ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π (–¥–∞—Ç–∞, UID, –∏–º—è)
- üåê –£–¥–∞–ª—ë–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Wi‚ÄëFi
- ‚è∞ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ NTP

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü–∏–Ω ESP32 |
|----------:|:----------|
| RX (–º–æ–¥—É–ª—è HLK) | GPIO 16 |
| TX (–º–æ–¥—É–ª—è HLK) | GPIO 17 |
| –ö–Ω–æ–ø–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ | GPIO 4 |
| LED Busy (–æ–∂–∏–¥–∞–Ω–∏–µ) | GPIO 5 |
| LED OK (—É—Å–ø–µ—Ö) | GPIO 18 |
| LED Fail (–æ—à–∏–±–∫–∞) | GPIO 19 |

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Wi-Fi ESP32 –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É `80`. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ IP-–∞–¥—Ä–µ—Å—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ–¥–µ—Ä–∂–∏—Ç:

- **–§–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- **–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ UID**
- **–ö–Ω–æ–ø–∫—É ¬´–°—Ç–∞—Ä—Ç¬ª –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è**
- **–ñ—É—Ä–Ω–∞–ª —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏**

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Wi‚ÄëFi

–ò–∑–º–µ–Ω–∏—Ç–µ –≤ –∫–æ–¥–µ –¥–∞–Ω–Ω—ã–µ —Å–≤–æ–µ–π —Å–µ—Ç–∏:

```cpp
const char* ssid     = "SSID";
const char* password = "PASS";
```

## üïí –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è NTP-—Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏. –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞ –∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑:

```cpp
configTzTime("UTC-3", "pool.ntp.org", "time.nist.gov");
```

## üíæ –•—Ä–∞–Ω–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞

–ñ—É—Ä–Ω–∞–ª –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `unlocklog.json` –Ω–∞ SPIFFS.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ FM-225.ino
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ data/
    ‚îî‚îÄ‚îÄ unlocklog.json (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üß™ –ü—Ä–∏–º–µ—Ä—ã HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤

- `/enroll?username=–ò–º—è` ‚Äî –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/deluser?id=UID` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ UID
- `/delall` ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `/unlock` ‚Äî –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
- `/log` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∂—É—Ä–Ω–∞–ª –≤ JSON

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. –°–æ–±–µ—Ä–∏—Ç–µ —Å—Ö–µ–º—É —Å–æ–≥–ª–∞—Å–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É –Ω–∞ ESP32
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Wi‚ÄëFi
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ IP ESP32 –≤ –±—Ä–∞—É–∑–µ—Ä–µ
5. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –¥–æ—Å—Ç—É–ø–æ–º

## üì∑ –ú–æ–¥—É–ª—å HLK-FM225

> HLK-FM225 ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –º–æ–¥—É–ª—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–æ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ UART, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏—è, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è.

## üìå –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- [ESPAsyncWebServer](https://github.com/me-no-dev/ESPAsyncWebServer)
- [AsyncTCP](https://github.com/me-no-dev/AsyncTCP)
- [ArduinoJson](https://github.com/bblanchon/ArduinoJson)
- [SPIFFS](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/storage/spiffs.html)



---

### –ê–≤—Ç–æ—Ä

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Äî **Floks**
